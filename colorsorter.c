#pragma config(Sensor, port2,  touchLED,      sensorVexIQ_LED)
#pragma config(Sensor, port5,  colorDetector, sensorVexIQ_ColorHue)
#pragma config(Sensor, port4,  distanceMM,    sensorVexIQ_Distance)
#pragma config(Sensor, port8,  bumpSwitch,    sensorNone)
#pragma config(Motor,  motor1, leftMotor,     tmotorVexIQ, openLoop, driveLeft, encoder)
#pragma config(Motor,  motor6, rightMotor,    tmotorVexIQ, openLoop, reversed, driveRight, encoder)
#pragma config(Motor,  motor10,armMotor,      tmotorVexIQ, openLoop, encoder)
#pragma config(Motor,  motor3, clawMotor,     tmotorVexIQ, openLoop, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

task OnDriveMode()
{
	repeat (forever) {
		if(getDistanceValue(distanceMM) >= 300) //Keep going until this reaches 30 cm
		{
			resetMotorEncoder(clawMotor);
			setMotorTarget(clawMotor, 0, 50);
			resetMotorEncoder(armMotor);
			setMotorTarget(armMotor, 0, 50);
			setMultipleMotors(50, motor1, motor6, , );
			waitUntil (getDistanceValue(distanceMM) <= 150);
			stopAllMotors();

			wait(2, seconds);
			setMotorTarget(armMotor, -1200, 30);
			setMotorTarget(clawMotor,-100, 50);
			wait(6, seconds);
			setMotorTarget(clawMotor,100, 50);
			wait(3, seconds);

			setServoTarget(armMotor, 0);
			wait(3, seconds);
			setMotorTarget(clawMotor,-100, 50);
		}		
//		else 
//		{
//			setServoTarget(armMotor, -1200);
//			wait(2, seconds);
//			setMotor(clawMotor, 20);
//			wait(1, seconds);
//			//claw grabs object
//			setServoTarget(clawMotor, 500);
//			wait(4, seconds);
//
//			if ((getColorValue(colorDetector)<29) || (getColorValue(colorDetector)>219)) //detects red hue
//			{
//				setTouchLEDColor(touchLED, colorRed); //color lights up if red
//				setServoTarget(armMotor, 200);  //Enable Servo Mode and move to position 100.
//				sleep(2000);
//				setMotor(clawMotor, -50);//claw drops object
//				sleep(2000);
//				wait(2, seconds);
//			}
//			else
//			{
//
//				setMotor(clawMotor, -50);//claw drops object if not yellow
//				setServoTarget(armMotor, 1000);
//				setMotor(leftMotor, -127);
//				setMotor(rightMotor, -127);
//				sleep(1000);//Wait for 1 second before continuing on in the program.
//
//				setMotor(leftMotor, -127);		//Set the leftMotor (motor1) to full power reverse (-127)
//				setMotor(rightMotor, 0);  	//Set the rightMotor (motor6) to full power forward (127)
//				sleep(1000);									//Wait for 1 second before continuing on in the program.
//
//				setMotor(leftMotor, 127);
//				setMotor(rightMotor, 127);
//				sleep(1000);	//Wait for 1 second before continuing on in the program.
//
//			}
//		}//end of else
	}//end of forever
}
//__________________________________________________________________________________________//
task OnReverseMode()
{
	if(getBumperValue(port12) == 1)
		setMotor(leftMotor, -127);
	setMotor(rightMotor, -127);
	sleep(1000);//Wait for 1 second before continuing on in the program.

	setMotor(leftMotor, -127);		//Set the leftMotor (motor1) to full power reverse (-127)
	setMotor(rightMotor, 0);  	//Set the rightMotor (motor6) to full power forward (127)
	sleep(1000);									//Wait for 1 second before continuing on in the program.

	setMotor(leftMotor, 127);
	setMotor(rightMotor, 127);
	sleep(1000);	//Wait for 1 second before continuing on in the program.

}
//__________________________________________________________________________________________//
task main()
{
	repeat(forever)
	{
		startTask(OnDriveMode);
		//		startTask(OnReverseMode);   /* to see a Task running individually.   */

		while(true)
		{
			sleep(25); // Keep the program alive, but let the other tasks have the processor by "sleeping"
		}
	}
}
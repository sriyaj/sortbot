#pragma config(Sensor, port2,  touchLED,      sensorVexIQ_LED)
#pragma config(Sensor, port5,  colorDetector, sensorVexIQ_ColorHue)
#pragma config(Sensor, port4,  distanceMM,    sensorVexIQ_Distance)
#pragma config(Sensor, port8,  bumpSwitch,    sensorNone)
#pragma config(Motor,  motor1, leftMotor,     tmotorVexIQ, openLoop, driveLeft, encoder)
#pragma config(Motor,  motor6, rightMotor,    tmotorVexIQ, openLoop, reversed, driveRight, encoder)
#pragma config(Motor,  motor10,armMotor,      tmotorVexIQ, openLoop, encoder)
#pragma config(Motor,  motor3, clawMotor,     tmotorVexIQ, openLoop, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

void displayStatement(string functionName)
{
	int distanceValue = getDistanceValue(distanceMM);
	int colorValue = getColorValue(colorDetector);
	displayTextLine(1, "%s Distance: %d", functionName, distanceValue );
	displayTextLine(2, "%s Color Value: %d", functionName, colorValue);
}

void OnDriveMode()
{
	repeat (forever) {
		if(getDistanceValue(distanceMM) >= 300) //Keep going until this reaches 30 cm
		{
			resetMotorEncoder(clawMotor);
			setMotorTarget(clawMotor, 0, 50);
			resetMotorEncoder(armMotor);
			setMotorTarget(armMotor, 0, 50);
			setMultipleMotors(50, motor1, motor6, , );
			waitUntil (getDistanceValue(distanceMM) <= 150);
			stopAllMotors();

			wait(2, seconds);
			setMotorTarget(armMotor, -1200, 30);
			setServoTarget(clawMotor,-500);
			wait(6, seconds);
			setServoTarget(clawMotor,500);
			wait(3, seconds);

			//if ((getColorValue(colorDetector)<29) || (getColorValue(colorDetector)>219)) //detects red hue in kitchen
			if ((getColorValue(colorDetector) < 100) || (getColorValue(colorDetector)>200)) //detects red hue in living room
			{
				displayStatement("IF");

				setTouchLEDColor(touchLED, colorRed); //color lights up if red
				setServoTarget(armMotor, 0);
				wait(3, seconds);
				setMotorTarget(clawMotor,-100, 50);
				wait(2, seconds);
			}
			else
			{
				displayStatement("ELSE");

				setMotor(clawMotor, -50);//claw drops object if not yellow
				setServoTarget(armMotor, 0);
				setMultipleMotors(leftMotor, rightMotor, -127);
				wait(1, seconds);//Wait for 1 second before continuing on in the program.

//				setMotor(leftMotor, -127);		//Set the leftMotor (motor1) to full power reverse (-127)
//				setMotor(rightMotor, 0);  	//Set the rightMotor (motor6) to full power forward (127)
//				sleep(1000);									//Wait for 1 second before continuing on in the program.
//				setMultipleMotors(leftMotor, rightMotor, 127);
//				sleep(1000);	//Wait for 1 second before continuing on in the program.
				
			}
			
		} //end of if
	}//end of forever
}

task main()
{
	OnDriveMode();
}